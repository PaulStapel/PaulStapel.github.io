<!DOCTYPE html>

<script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><script data-goatcounter="https://paulstapel.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tsparticles/preset-stars@3/tsparticles.preset.stars.bundle.min.js"></script>


<html lang="en">
<head>
    <title>How to Manage Player Input - Part 1: Polling | Paul&#39;s Particles</title>
    
    <nav aria-label="Breadcrumb" style="display:none"> 
        <ol class="breadcrumb">
            <li><a href="http://localhost:1313/">Home</a></li>
            
            
            <li><a href="http://localhost:1313/">Paul&#39;s Particles</a></li>
            
            <li aria-current="page">How to Manage Player Input - Part 1: Polling</li>
        </ol>
    </nav>
    <meta name="description" content="Exploring input handling inside of games using polling">
    <meta charset="UTF-8">
    <meta property="og:title" content="How to Manage Player Input - Part 1: Polling" />
    <meta property="og:description" content="Exploring input handling inside of games using polling" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://localhost:1313/handling-user-input/" />
    <meta property="og:image" content="https://paulstapel.com/favicons/favicon-196x196.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="How to Manage Player Input - Part 1: Polling" />
    <meta name="twitter:description" content="Exploring input handling inside of games using polling" />
    <meta name="twitter:image" content="https://paulstapel.com/favicons/favicon-196x196.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/syntax.css">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Lato" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    </noscript>


    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "How to Manage Player Input - Part 1: Polling",
        "description": "Exploring input handling inside of games using polling",
        "image": "https://paulstapel.com/favicons/favicon-196x196.png",
        "author": {
            "@type": "Person",
            "name": "Paul Stapel"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Paul Stapel",
            "logo": {
            "@type": "ImageObject",
            "url": "https://paulstapel.com/favicons/favicon-196x196.png"
            }
        },
        "datePublished": "2025-07-06",
        "dateModified": "2025-07-06",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/handling-user-input\/"
        },
        "articleSection": [
            "coding", "gameDev", "C#"
        ]
    }
    </script>

    <link rel="canonical" href="http://localhost:1313/handling-user-input/">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <meta name="robots" content="index, follow">


    

    
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://paulstapel.com/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://paulstapel.com/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://paulstapel.com/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://paulstapel.com/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://paulstapel.com/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://paulstapel.com/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://paulstapel.com/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://paulstapel.com/favicons/apple-touch-icon-152x152.png" />

    
    <link rel="icon" type="image/png" href="https://paulstapel.com/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="https://paulstapel.com/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="https://paulstapel.com/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="https://paulstapel.com/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="https://paulstapel.com/favicons/favicon-128.png" sizes="128x128" />

    
    <meta name="application-name" content="Your Website Name" />
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="https://paulstapel.com/favicons/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="https://paulstapel.com/favicons/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="https://paulstapel.com/favicons/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="https://paulstapel.com/favicons/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="https://paulstapel.com/favicons/mstile-310x310.png" />
    <style>
    body {
        font-family: 'Lato';
    }
    </style>
</head>
<body>
    <div class="container">
      <nav class="navbar">
  <div class="logo">
    
    <a href="/" class="site-name hoverlink">Paul's Particles</a>
    
  </div class="nav-elements">
    <div class="toggle">
      <svg
        width="20px"
        height="20px"
        viewBox="-0.14 0 20.03 20.03"
        fill="#000000"
      >
        <g id="moon-alt" transform="translate(-2.25 -2)">
          <path
            id="secondary"
            fill="#FFFFF0"
            d="M21,12A9,9,0,0,1,3.25,14.13,6.9,6.9,0,0,0,8,16,7,7,0,0,0,11.61,3H12a9,9,0,0,1,9,9Z"
          ></path>
        </g>
      </svg>
      <div class="ball" ></div>
      <svg width="20px" height="20px" viewBox="0 0 20 20" fill="#000000">
        <g id="sun" transform="translate(-2 -2)">
          <circle
            id="secondary"
            fill="#FFFFF0"
            cx="4"
            cy="4"
            r="4"
            transform="translate(8 8)"
          ></circle>
          <path
            id="primary"
            d="M12,3V4M5.64,5.64l.7.7M3,12H4m1.64,6.36.7-.7M12,21V20m6.36-1.64-.7-.7M21,12H20M18.36,5.64l-.7.7M12,8a4,4,0,1,0,4,4A4,4,0,0,0,12,8Z"
            fill="none"
            stroke="#ffe01b"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
          ></path>
        </g>
      </svg>
    </div >


    <div class="links">
    <a href="/" class="hoverlink">Particles</a>
    
    
    <a href="/about-me/about-me" class="hoverlink">About</a>
    
    <a href="/categories/meditation" class="hoverlink">Meditation</a>
    <a href="/categories/daily-drop/" class="hoverlink">Drops</a>
    <a href="/categories/wall/" class="hoverlink">Wall</a>
    <a href="/categories/recipe/" class="hoverlink">Recipes</a>
  </div>

  <div class="search-container">
      <input type="text" placeholder="Search...">
      <div class="search"></div>
    </div>


  <header class="borgir"> 
  <input type="checkbox" id="menyAvPaa">
  <label id="burger" for="menyAvPaa">
      <div></div>
      <div></div>
      <div></div>
  </label>
<div id="meny">
  <div id="tsparticles"></div>
  <div class="moblinks">
  <a href="/" class="hoverlink">Particles</a>
  
  
  <a href="/about-me/about-me" class="hoverlink">About</a>
  
  <a href="/categories/meditation/" class="hoverlink">Meditation</a>
  <a href="/categories/daily-drop/" class="hoverlink">Drops</a>
  <a href="/categories/wall/" class="hoverlink">Wall</a>
  <a href="/categories/recipe/" class="hoverlink">Recipes</a>
</div>
</div>


</header>

</nav>
      <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
      <script src="/js/app.js"> </script>
      


<div class="single">
   <div class="singleHead">
      <div class="singleHeadText">
        <h1 class="singleHeadTitle">How to Manage Player Input - Part 1: Polling</h1> 
        
        <p class="singleHeadDesc">Exploring input handling inside of games using polling</p>
        <time class="singleDate"><em>6 Jul, 2025</em></time>
        <div class="singleCategories">
            
            <a class="singleCategory" href=http://localhost:1313/categories/coding/>coding</a> 
            
            <a class="singleCategory" href=http://localhost:1313/categories/gamedev/>gameDev</a> 
            
            <a class="singleCategory" href=http://localhost:1313/categories/c%23/>C#</a> 
            
        </div>
        
      </div>
   </div>
   <div class="singleBottom">
    
    
      <div class="singleContent"><p>So I have slowly been working on a game lately, and I wanted to share some of the problems I face and my solutions to those problems. I find that a definitive guide to input handling was something I could not really find online, and although input handling can be done in simple ways, I&rsquo;d like to make a system to make it more robust and extensible. I wanted to share my findings and opinions here, as I have found that there is not enough information about this topic online. If you have any feedback, or if you would implement things differently, I&rsquo;d love to hear about it!</p>
<h2 id="the-problem">The Problem</h2>
<p>In this article, I will assume that we already have some API that can query the state of the input-device that we are using. We can call it to find the state of for example a button or a joystick. From there, we wish to translate this state towards some effect on a player character or other interactable element in our game.</p>
<p>We wish to do this in a way that is:</p>
<ul>
<li><strong>configurable</strong>: modern games should have mappable controls among other accessibility options</li>
<li><strong>extensible</strong>: we should be able to easily add new controls without having to change the whole codebase</li>
<li><strong>efficient</strong>: input-lag is a sure-fire way to make a lame game</li>
<li><strong>decoupled</strong>: we want to make our system as versatile and testable as possible</li>
</ul>
<p>The solution(s) that we will look at here may also bring some additional benefits, but in my opinion any good input system satisfies at least these four requirements. First, however, we will discuss a very standard implementation and all the ways in which this can go wrong. I aim to make these techniques language-agnostic, but for my examples I will be writing in C#.</p>
<h2 id="a-naive-polling-based-approach">A Naive Polling-Based Approach</h2>
<p>Let us assume that we have a simple program that has a main loop like</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="c1">// An overly simplified main loop for illustration purposes</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="k">class</span> <span class="nc">Game</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">inputAPI</span> <span class="p">=</span> <span class="k">new</span> <span class="n">InputAPI</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">player</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Player</span><span class="p">(</span><span class="n">inputAPI</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">entities</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">GameEntity</span><span class="p">&gt;</span> <span class="p">{</span> <span class="n">player</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">entity</span> <span class="k">in</span> <span class="n">entities</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">entity</span><span class="p">.</span><span class="n">Update</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="n">entity</span><span class="p">.</span><span class="n">Draw</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>From this, we call for each entity an update, and inside of the update for player, we have code that looks a bit like</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="c1">// Naive implementation</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">Player</span> <span class="p">:</span> <span class="n">GameEntity</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">InputAPI</span> <span class="n">inputAPI</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// .. some other code</span>
</span></span><span class="line"><span class="cl">     
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">inputAPI</span><span class="p">.</span><span class="n">GetInput</span><span class="p">()</span> <span class="p">==</span> <span class="s">&#34;Button A&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Do A press input</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">inputAPI</span><span class="p">.</span><span class="n">GetInput</span><span class="p">()</span> <span class="p">==</span> <span class="s">&#34;Button B&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Do B press input</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ... etc.</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Let&rsquo;s look at our four criteria. It lacks any configurability, as we have hard-coded the buttons inside of our Player class. In terms of extensibility, we can easily add another if-statement to this code. But imagine for a second that we have a game with different characters, spells and other options. Each of these has their own control scheme and effects mapped to different buttons. Suddenly, we have to go through a plethora of classes just to add a single control. And heavens forbid you want to add combination input in your game, as composite inputs will become a conditional nightmare to implement.</p>
<p>Finally, we can see that it is quite coupled to the inputAPI that we use. Suppose that we decide to use our mouse and keyboard instead of a standard controller. Now, we would have to add another check for our inputAPI to check if either a key or button is pressed.</p>
<p>The only things we have going for us are simplicity and efficiency. Let&rsquo;s slowly work towards a better implementation.</p>
<h2 id="keybindings">Keybindings</h2>
<p>For our first step, we will introduce keybindings to our implementation. We would like our game to become data-driven, so that we can manipulate the keybindings at runtime. In order to do this, we will first introduce some abstractions to make dealing with our code a bit easier.</p>
<p>Our first abstraction is that of states inside of our game. Depending on what is happening on-screen, we may have different controls and actions that we can perform. In your main menu, pressin the up-arrow has a different result from pressing that same button during the final boss. Because of this, we wish to make our controls depend on the state of the game.</p>
<p>For our second abstraction, we wish to seperate the action from the input, such that the final action that occurs is independent of the source from which it got the input. The system should not couple the button A with the action Jump. Some input manager should know that the button A (in this context) maps to Jump, and it should then send a Jump command to the player. This also lets us buffer input if we wish, and it is an easy way to bind keys to a certain command or action.</p>
<p>Using this, keybindings become quite simple. Take a look at the following JSON we may use to define commands inside of a mock game. This is all keyboard-based for now, with multiple keys being mappable per command.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-JSON" data-lang="JSON"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Gameplay&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;MoveUp&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;W&#34;</span><span class="p">,</span> <span class="s2">&#34;Up&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;MoveDown&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;S&#34;</span><span class="p">,</span> <span class="s2">&#34;Down&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;MoveLeft&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="s2">&#34;Left&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;MoveRight&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;D&#34;</span><span class="p">,</span> <span class="s2">&#34;Right&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Shoot&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Space&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Global&#34;</span><span class="p">:</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Quit&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Escape&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;GameOver&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;NewGame&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Enter&#34;</span><span class="p">,</span> <span class="s2">&#34;Space&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Menu&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;MoveUp&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;W&#34;</span><span class="p">,</span> <span class="s2">&#34;Up&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;MoveDown&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;S&#34;</span><span class="p">,</span> <span class="s2">&#34;Down&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;Select&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Enter&#34;</span><span class="p">,</span> <span class="s2">&#34;Space&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>We can then simply parse this JSON and store it in a nested dictionary. Depending on your implementation, the key-value pair would either be Input-Command or Command-Input. Command-Input would work using an enum for your commands, and is probably the easiest way to go. Input-Command is more powerful, and is what we will be using for the rest of this article.</p>
<h2 id="command-based-polling-input-handling">Command-Based Polling Input Handling</h2>
<p>Now that we have this infrastructure ready, let&rsquo;s look at a better way to handle our inputs. We create a new abstract class &ldquo;CommandProvider&rdquo; from which we can create concrete instances for each Player character or Enemy. The power of this approach is that enemy AI and player input are all treated as just a provider of commands, and that they don&rsquo;t care about the actual way these commands where achieved. As an example, we could have this implementation of a CommandProvider for a human player:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">PlayerCommandProvider</span> <span class="p">:</span> <span class="n">CommandProvider</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// For each player, we can use a different input API (keyboard, controller, DDR pad...)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">InputAPI</span> <span class="n">inputAPI</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We may even set configurable keybindings for each player individually. </span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">GameState</span><span class="p">,</span> <span class="p">&lt;</span><span class="n">Input</span><span class="p">,</span> <span class="n">Command</span><span class="p">&gt;&gt;</span> <span class="n">keybindings</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Command</span><span class="p">&gt;</span> <span class="n">GetCommands</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Input</span> <span class="n">input</span> <span class="p">=</span> <span class="n">inputAPI</span><span class="p">.</span><span class="n">GetInput</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// ... Do some logic on input (based on keybindings)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">commands</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Our player code could then be reduced to:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl"><span class="c1">// Polling implementation</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">Player</span> <span class="p">:</span> <span class="n">GameEntity</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">CommandProvider</span> <span class="n">commandProvider</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Player</span><span class="p">(</span><span class="n">CommandProvider</span> <span class="n">commandProvider</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="n">commandProvider</span> <span class="p">=</span> <span class="n">commandProvider</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// .. some other code</span>
</span></span><span class="line"><span class="cl">     
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">Update</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">command</span> <span class="k">in</span> <span class="n">commandProvider</span><span class="p">.</span><span class="n">GetCommands</span><span class="p">())</span> <span class="c1">// Poll the commands</span>
</span></span><span class="line"><span class="cl">            <span class="n">command</span><span class="p">.</span><span class="n">Execute</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// Execute each command</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Let us look at our four main criteria for building an input handler.</p>
<p>Firstly, we can see that this design is configurable, as we are able to change the commands loaded in our JSON and each input provider may even have their own configuration. The way a GameEntity behaves can be entirely controlled by the InputProvider that guides it.</p>
<p>We can also see that this method is very extensible. For a player, we can simply add a new command to the controls.json and write the command implementation for it. Still, however, we have some small problems when it comes to more complex inputs. Say for example we wish to adjust jump-height based on the duration of a button press. In our case, there is no simple way to do this.</p>
<p>Performance is about the same as for the naive implementation, although we have added quite some classes to accomodate this abstraction, meaning that there is a little more overhead. This should not be a problem if this is implemented well however.</p>
<p>Finally, we have succesfully decoupled our input device from our player. Furthermore, the logic of what input to return and the GameEntity are also seperate, giving us a kind of plug-and-play system where we can easily exchange one input with another.</p>
<h2 id="extending-this-system">Extending This System</h2>
<p>We can do quite a lot with this simple framework. We could for example introduce a more ECS (Entity, Component, System) based structure where each Entity is composed of Components that define what it can do. We can build reactive components for the entity and let our inputs only use those for example.</p>
<p>We can also create an undo-system by storing the commands used and giving each command not only an execute() function call, but also an undo() call. This could even be used to implement a playback feature.</p>
<p>We can now also read these commands for online multiplayer. For each command I use, I send it to a remote player, which uses some RemotePlayerInputProvider to sync the character on their screen. In a game where you can control enemies, this structure also makes it very easy.</p>
<p>Finally, I see two ways to extend this method to allow for more complex inputs like combos or stateful commands. We could upgrade our JSON to allow form more complex inputs to be used as keys, which can for example be handled by using an enum for long presses and short presses, or by using a list of inputs as a key for a combo-action. Secondly, we could introduce PLAYER states inside of the JSON and seperate player controls from global controls. Then, we could have a player be in the &ldquo;airborne&rdquo; state, unlocking new controls or moves to be used. This also helps prevent the problem of being able to jump while airborne in quite an elegant way, and makes state something data-driven.</p>
<p>I am afraid that there are some limits to this system however. In my next article, I will be going over an alternative (and more widely used) approach that solves a lot of the problems this polling approach has.</p>
<h2 id="signing-off-have-a-lovely-day">Signing off, have a lovely day!</h2>
</div>
    

   </div>
</div>

      <div class="footer">
  <div class="footerLinks">
    <a href="/">Particles</a> |
    
    <a href="/set-up/set-up">Setup</a> |
    <a href="/about-me/about-me">About</a> |
    <a href="/codex/codex-meae-mentis">Codex</a> |
    <a href="/categories/meditation" >Meditation</a> |
    <a href="/categories/daily-drop">Drops</a> | 
    <a href="/categories/recipe/">Recipes</a>
  </div>

      <div class="social">
    <a href="https://github.com/PaulStapel">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
      </svg>
    </a>
    <a href="https://www.linkedin.com/in/paul-stapel/">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
        <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/>
      </svg>
  </a>
  <a href="https://www.instagram.com/justpaulstapel/">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16">
    <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"/>
  </svg>
  </a>
  
  </div>
  </div>
  
</div>

    </div>
</body>
</html>